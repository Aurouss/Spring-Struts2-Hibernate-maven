<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
		"http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
	<constant name="struts.custom.i18n.resources" value="global" />
	<constant name="struts.devMode" value="true" />
	<constant name="struts.action.extension" value="action" />

	<package name="default" extends="struts-default">
		<action name="hello" class="tk.blizz.ssh.action.HelloAction">
			<result name="success">index.jsp</result>
			<result name="error">bad.jsp</result>
		</action>
	</package>

	<package name="user" namespace="/" extends="struts-default">
		<action name="register" class="tk.blizz.ssh.action.RegisterAction">
			<interceptor-ref name="token"/>
			<interceptor-ref name="defaultStack"/>
			<result name="input">register.jsp</result>
			<result name="success">index.jsp</result>
			<result name="error">bad.jsp</result>
			<result name="invalid.token" type="redirect">
				<param name="location">refresh.jsp</param>
			</result>
		</action>
	</package>

	<package name="json" namespace="/" extends="json-default">
		<action name="jsonHello" class="tk.blizz.ssh.action.HelloAction"
			method="jsonHello">
			<result name="success" type="json" />
			<result name="error" type="json" />
		</action>
	</package>

	<package name="report" namespace="/" extends="struts-default">
		<result-types>
			<result-type name="jasper"
				class="org.apache.struts2.views.jasperreports.JasperReportsResult" />
		</result-types>

		<action name="getReport" class="tk.blizz.ssh.action.ReportAction">
			<result name="success" type="jasper">
				<param name="location">${reportLocation}</param>
				<param name="dataSource">datasource</param>
				<param name="format">PDF</param>
			</result>
			<result name="dhtml" type="stream">
				<param name="contentType">text/html;charset=UTF-8</param>
				<param name="inputName">report</param>
				<param name="contentDisposition">filename=${downloadFileName}</param>
				<param name="bufferSize">4096</param>
			</result>
		</action>
	</package>

</struts>
